<h1>Listing messages</h1>

<table>
  <tr><th>Sender<th>Recipient<th>Subject<th>Timestamp<th>Notification(s)
    <th>State<th>Options</tr>

<% @messages.each do |message| %>
  <tr>
    <td><%= message.sender %>
    <td><%= message.recipients_direct %>
    <td><%= message.subject %>
    <td><%= message.created_at.strftime("%c") %>
    <td><%= message.notifications.count %>
    <td style="background-color: <%= colorize(message.state) %>"><%= message.state.capitalize %>
    <td><%= link_to 'Show', message %> |
    <%= link_to 'Edit', edit_message_path(message) %> |
    <%= link_to 'Destroy', message, :confirm => 'Are you sure?', :method => :delete %></td>
  </tr>
<% end %>
</table>

<br/>

<%= will_paginate @messages %>

<p class="navigation">
<%= link_to 'New message', new_message_path %> |
<%= link_to 'Search', :controller => :messages, :action => :search %>
</p>
